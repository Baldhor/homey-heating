!function(e){function t(t){for(var a,l,c=t[0],o=t[1],i=t[2],d=0,p=[];d<c.length;d++)l=c[d],r[l]&&p.push(r[l][0]),r[l]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);for(u&&u(t);p.length;)p.shift()();return s.push.apply(s,i||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,c=1;c<n.length;c++){var o=n[c];0!==r[o]&&(a=!1)}a&&(s.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},r={2:0},s=[];function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise(function(t,a){n=r[e]=[t,a]});t.push(n[2]=a);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,l.nc&&c.setAttribute("nonce",l.nc),c.src=function(e){return l.p+""+({}[e]||e)+".js"}(e),s=function(t){c.onerror=c.onload=null,clearTimeout(o);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src,l=new Error("Loading chunk "+e+" failed.\n("+a+": "+s+")");l.type=a,l.request=s,n[1](l)}r[e]=void 0}};var o=setTimeout(function(){s({type:"timeout",target:c})},12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(t)},l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l.oe=function(e){throw console.error(e),e};var c=window.webpackJsonp=window.webpackJsonp||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var i=0;i<c.length;i++)t(c[i]);var u=o;s.push([348,3]),n()}({348:function(e,t,n){"use strict";n.r(t);var a=n(17),r=n(40),s=n(133),l=n.n(s),c=n(79),o=n.n(c),i=n(89),u=n(0),d=n.n(u),p=n(16),m=n(80);var h=n(350),y=n(351),b=n(352);const g=()=>{const[e,t]=u.useState(0);return u.useEffect(()=>{const n=setInterval(()=>{t(e>=100?0:e+5)},10);return()=>clearInterval(n)}),u.createElement(r.c,{style:{position:"absolute",top:"50%",left:"50%",marginTop:-40,marginLeft:-40},size:80,variant:"determinate",value:e})};var f=n(81);const O=u.lazy(()=>Promise.all([n.e(0),n.e(1),n.e(12),n.e(11)]).then(n.bind(null,5634))),v=u.lazy(()=>Promise.all([n.e(0),n.e(4)]).then(n.bind(null,5636))),j=u.lazy(()=>Promise.all([n.e(0),n.e(1),n.e(6),n.e(9)]).then(n.bind(null,5635))),P=({match:e})=>u.createElement(f.a,null,u.createElement(h.a,{path:`${e.url}/:id/exceptions`,exact:!0,component:v}),u.createElement(h.a,{path:`${e.url}/:id/schedule`,exact:!0,component:j}),u.createElement(h.a,{path:`${e.url}/:id`,exact:!0,component:O})),E=u.lazy(()=>Promise.all([n.e(8),n.e(10)]).then(n.bind(null,5630))),S=u.lazy(()=>Promise.all([n.e(0),n.e(7)]).then(n.bind(null,5631))),x=u.lazy(()=>Promise.all([n.e(0),n.e(5)]).then(n.bind(null,5632)));const T=Object(a.createMuiTheme)({palette:{primary:l.a,secondary:o.a}});p.render(u.createElement(class extends u.Component{constructor(e){super(e),this.state={hasError:!1}}componentDidCatch(e,t){this.setState({hasError:!0,error:e,info:t})}render(){return this.state.hasError?d.a.createElement(u.Fragment,null,d.a.createElement("h1",null,Object(m.a)("confirm.title")),d.a.createElement("div",{style:{whiteSpace:"pre-wrap"}},this.state.error&&this.state.error.toString(),d.a.createElement("br",null),this.state.info.componentStack)):this.props.children}},null,u.createElement(a.MuiThemeProvider,{theme:T},u.createElement(r.d,null),u.createElement(i.SnackbarProvider,{maxSnack:3,anchorOrigin:{vertical:"bottom",horizontal:"left"},style:{maxWidth:280}},u.createElement(class extends u.Component{constructor(e){super(e)}render(){return u.createElement(u.Suspense,{fallback:u.createElement(g,null)},u.createElement(y.a,null,u.createElement(u.Fragment,null,u.createElement(b.a,null,u.createElement(h.a,{exact:!0,path:"/",component:E}),u.createElement(h.a,{exact:!0,path:"/settings",component:S}),u.createElement(h.a,{exact:!0,path:"/temperatures",component:x}),u.createElement(h.a,{path:"/plans",component:P})))))}},null)))),document.querySelector("#root"))},58:function(e,t,n){"use strict";var a,r,s;!function(e){e[e.Monday=1]="Monday",e[e.Tuesday=2]="Tuesday",e[e.Wednesday=3]="Wednesday",e[e.Thursday=4]="Thursday",e[e.Friday=5]="Friday",e[e.Saturday=6]="Saturday",e[e.Sunday=0]="Sunday"}(a||(a={})),function(e){e[e.Automatic=0]="Automatic"}(r||(r={})),function(e){e[e.DayAtHome=1]="DayAtHome",e[e.DayAway=2]="DayAway",e[e.Sleep=3]="Sleep",e[e.Holiday=4]="Holiday",e[e.OutOfSeason=5]="OutOfSeason"}(s||(s={})),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return s})},80:function(e,t,n){"use strict";n(18);let a=null;a=Homey.__,t.a=a},81:function(e,t,n){"use strict";var a=n(0),r=n(18),s=n(58);const l={index:-1,day:0,hour:0,minute:0,targetTemperature:0},c={loaded:!1,dirty:!1,savePoint:null,setPoint:Object.assign({},l),zones:{},devices:{},plan:{id:"",enabled:!1,name:"",zones:[],devices:[],schedule:[],overrides:null},selectedDay:{last:null,schedules:[]}},o=e=>Object(r.sortBy)(e,[e=>0===e.day?7:e.day,"hour","minute"]).map((e,t)=>Object.assign({},e,{index:t})),i=(e,t)=>{switch(t.type){case"loadDevices":return Object.assign({},e,{devices:t.devices});case"loadZones":return Object.assign({},e,{zones:t.zones});case"savePoint":return Object.assign({},e,{savePoint:JSON.stringify(Object.assign({},e,{history:null}))});case"undo":return null==e.savePoint?e:JSON.parse(e.savePoint);case"commit":return Object.assign({},e,{savePoint:null});case"setOverride":return Object.assign({},e,{dirty:!0,plan:Object.assign({},e.plan,{overrides:Object.assign({},e.plan.overrides,{[s.c[t.mode]]:{targetTemperature:t.temperature}})})});case"clearOverride":{const n=e.plan.overrides||{};return delete n[t.mode],delete n[s.c[t.mode]],Object.assign({},e,{dirty:!0,plan:Object.assign({},e.plan,{overrides:n})})}case"loadSetPoint":return Object.assign({},e,{setPoint:t.setPoint});case"setStart":{let n=null;return n="string"==typeof t.start?new Date("1970-01-01T"+t.start+"Z"):t.start,Object.assign({},e,{setPoint:Object.assign({},e.setPoint,{hour:n.getUTCHours(),minute:n.getUTCMinutes()})})}case"setTargetTemperature":return Object.assign({},e,{setPoint:Object.assign({},e.setPoint,{targetTemperature:t.temperature})});case"newSetPoint":return Object.assign({},e,{setPoint:Object.assign({},l,{day:t.day})});case"toggleEnabled":return Object.assign({},e,{dirty:!0,plan:Object.assign({},e.plan,{enabled:!e.plan.enabled})});case"setName":return Object.assign({},e,{dirty:!0,plan:Object.assign({},e.plan,{name:t.name})});case"toggleDevice":{const n=e.plan.devices||[];return Object(r.isEmpty)(Object(r.remove)(n,e=>e===t.device))&&n.push(t.device),Object.assign({},e,{dirty:!0,plan:Object.assign({},e.plan,{devices:n})})}case"toggleZone":{const n=e.plan.zones||[];return Object(r.isEmpty)(Object(r.remove)(n,e=>e===t.zone))&&n.push(t.zone),Object.assign({},e,{dirty:!0,plan:Object.assign({},e.plan,{zones:n})})}case"copyDays":{const n=Object(r.filter)(e.plan.schedule,e=>e.day===t.source),a=Object(r.map)(e.plan.schedule,e=>Object.assign({},e));return Object(r.forEach)(t.targets,e=>{Object(r.remove)(a,t=>t.day===e),Object(r.forEach)(n,t=>{a.push(Object.assign({},t,{day:e}))})}),Object.assign({},e,{dirty:!0,plan:Object.assign({},e.plan,{schedule:o(a)})})}case"addSetPoint":{const n=[...e.plan.schedule];return n.push(Object.assign({},t.setPoint,{index:-1})),Object.assign({},e,{dirty:!0,plan:Object.assign({},e.plan,{schedule:o(n)})})}case"updateSetPoint":{const n=[...e.plan.schedule];return n[t.setPoint.index]=t.setPoint,Object.assign({},e,{dirty:!0,plan:Object.assign({},e.plan,{schedule:o(n)})})}case"removeSetPoint":{const n=[...e.plan.schedule];return n.splice(t.index,1),Object.assign({},e,{dirty:!0,plan:Object.assign({},e.plan,{schedule:o(n)})})}case"selectDay":{const n=e.plan.schedule.filter(e=>e.day===t.day),a=(()=>{if(0===e.plan.schedule.length)return null;if(0!==n.length&&0===n[0].index)return e.plan.schedule[e.plan.schedule.length-1].day!==n[0].day?e.plan.schedule[e.plan.schedule.length-1]:null;if(0===n.length){let n=t.day-1;for(n<0&&(n=6);n>=0;){const t=e.plan.schedule.filter(e=>e.day===n);if(t.length>0)return t[t.length-1];n-=1}return null}return e.plan.schedule[n[0].index-1]})();return Object.assign({},e,{selectedDay:{last:a,schedules:n}})}case"loadPlan":return Object.assign({},JSON.parse(JSON.stringify(e)),{loaded:!0,dirty:!1,plan:Object.assign({},t.plan,{name:t.plan.name||"",zones:t.plan.zones||[],devices:t.plan.devices||[],overrides:t.plan.overrides||{},schedule:o([...t.plan.schedule])})});default:return e}},u=i;n.d(t,"a",function(){return b}),n.d(t,"b",function(){return g}),n.d(t,"c",function(){return f});const{createContext:d,useContext:p,useReducer:m}=a,h=d(c),y=d(()=>0),b=({children:e})=>{const[t,n]=m(u,c);return a.createElement(y.Provider,{value:n},a.createElement(h.Provider,{value:t},e))},g=()=>p(y),f=e=>{return p(h)[e]}}});
//# sourceMappingURL=app.js.map