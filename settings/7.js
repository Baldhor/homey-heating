(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{154:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.default}});var r=a(n(416))},378:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(377);function r(e,t,n=null){return Object(a.b)(this,void 0,void 0,(function*(){return yield new Promise((a,r)=>{Homey.api(e,t,n,(e,t)=>{e?r(e):a(t)})})}))}},379:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return l}));var a=n(377),r=n(19),c=n(378);const i=e=>Object(a.b)(void 0,void 0,void 0,(function*(){const t=Object.assign({},e);return t.zones&&0!==t.zones.length||(t.zones=void 0),t.devices&&0!==t.devices.length||(t.devices=void 0),yield Object(c.a)("PUT",`/plans/${e.id}`,t)})),o={fetchPlans:()=>Object(a.b)(void 0,void 0,void 0,(function*(){const e=yield Object(c.a)("GET","/plans");return Object(r.sortBy)(Object(r.map)(e,e=>(e.zones=e.zones||[],e.devices=e.devices||[],e)),e=>e.name)})),fetchPlanById:e=>Object(a.b)(void 0,void 0,void 0,(function*(){const t=yield Object(c.a)("GET",`/plans/${e}`);if(null==t)throw new Error(`Plan ${e} not found.`);return t.zones=t.zones||[],t.devices=t.devices||[],t})),fetchSchedule:()=>Object(a.b)(void 0,void 0,void 0,(function*(){const e=yield Object(c.a)("GET","/schedule");return e.temperatures=Object(r.sortBy)(e.temperatures,[e=>e.device.name]),e})),updatePlan:i,removePlan:e=>Object(a.b)(void 0,void 0,void 0,(function*(){return yield Object(c.a)("DELETE",`/plans/${e}`)})),togglePlanState:e=>Object(a.b)(void 0,void 0,void 0,(function*(){return e.enabled=!e.enabled,yield i(e),!0}))},l={fetchMode:()=>Object(a.b)(void 0,void 0,void 0,(function*(){return(yield Object(c.a)("GET","/mode")).mode})),setMode:e=>Object(a.b)(void 0,void 0,void 0,(function*(){return yield Object(c.a)("PUT","/mode",{mode:e})}))}},380:function(e,t,n){"use strict";var a=n(146),r=n.n(a),c=n(17),i=n(147),o=n.n(i),l=n(40),s=n.n(l),u=n(0),d=n.n(u);t.a=Object(c.withStyles)(e=>({appBar:{},grow:{flexGrow:1},buttons:{display:"flex"},toolbar:{alignItems:"center",justifyContent:"space-between"}}))(e=>{const{classes:t}=e,{button:n,title:a,actions:c,subBar:i}=e.children||{button:null,title:null,actions:null,subBar:null};return d.a.createElement(u.Fragment,null,d.a.createElement(r.a,{position:"absolute",color:"primary",className:t.appBar},d.a.createElement(o.a,{className:t.toolbar},e.button||n,d.a.createElement(s.a,{variant:"h6",color:"inherit",noWrap:!0},e.title||a),d.a.createElement("div",{className:t.grow}),null!=c&&d.a.createElement("div",{className:t.buttons},c)),null!=i&&i))})},381:function(e,t,n){"use strict";var a=n(17),r=n(0),c=n.n(r);t.a=Object(a.withStyles)(e=>({inputContainer:{width:"100%",paddingLeft:2*e.spacing.unit,paddingRight:3*e.spacing.unit}}))(e=>c.a.createElement("div",{className:e.classes.inputContainer},e.children))},382:function(e,t,n){"use strict";var a=n(377),r=n(50),c=n(17),i=n(148),o=n.n(i),l=n(393),s=n.n(l),u=n(0),d=n.n(u),f=n(25),m=n(91),b=n(92);function p(e){var{innerRef:t}=e,n=Object(a.d)(e,["innerRef"]);return n.to.toString().match(/https/)?d.a.createElement("a",Object.assign({onClick:()=>Homey.openURL(n.to.toString())},n),n.children):d.a.createElement(b.b,Object.assign({},n))}var g=e=>d.a.createElement(r.n,Object.assign({},e,{component:p}),e.children);n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return j}));const v=e=>({text:{padding:2*e.spacing.unit,paddingBottom:0},version:{padding:2*e.spacing.unit,paddingTop:0},normal:{},selected:{color:e.palette.primary.main},otherButton:{},firstButton:{marginLeft:-12}}),h=e=>{const[t,n]=d.a.useState(!1);return d.a.createElement(d.a.Fragment,null,d.a.createElement(y,{open:t,onClose:()=>{n(!1)}}),d.a.createElement(j,{first:!0,onClick:()=>{n(!0)},icon:d.a.createElement(s.a,null)}))},y=Object(f.f)(Object(c.withStyles)(v)(e=>{const{classes:t}=e,n=[{type:"entry",to:"/",text:Object(m.a)("menu.plans")},{to:"/temperatures",text:Object(m.a)("menu.temperatures")},{to:"/schedules",text:Object(m.a)("menu.schedules")},{to:"/settings",text:Object(m.a)("menu.settings")},{to:"https://homey-heating.mskg.app",text:Object(m.a)("menu.help")}];return d.a.createElement(o.a,{open:e.open,onClose:e.onClose},d.a.createElement(r.v,{className:t.text,variant:"h5",gutterBottom:!0},Object(m.a)("menu.title")),d.a.createElement(r.v,{className:t.version,variant:"body2",color:"textSecondary",gutterBottom:!0},"Version ","1.2.3-rc5"," (","1193",")"),d.a.createElement(r.h,null),d.a.createElement(r.m,null,n.map(n=>"Divider"===n.type?d.a.createElement(r.h,null):d.a.createElement(g,{key:n.to,to:n.to,disabled:e.match.url===n.to,button:!0},d.a.createElement(r.q,{primary:n.text,classes:{primary:e.match.url!==n.to?t.normal:t.selected}})))))})),j=Object(c.withStyles)(v)(e=>{const{classes:t,first:n,icon:c}=e,i=Object(a.d)(e,["classes","first","icon"]);return d.a.createElement(r.j,Object.assign({className:n?t.firstButton:t.otherButton,color:"inherit"},i),c)})},383:function(e,t,n){"use strict";var a=n(17),r=n(0),c=n.n(r);t.a=Object(a.withStyles)(e=>({root:{webkitOverflowScrolling:"touch",display:"flex",flexFlow:"column",height:"100vh",width:"100vw",backgroundColor:"#fff"},body:{flex:"1 0 100%",margin:0,maxWidth:"100%",overflowY:"scroll"}}))(e=>{const{classes:t}=e,{header:n,body:a,paddingTop:r,paddingBottom:i}=e.children,o=i||"auto";return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:t.root},n,c.a.createElement("div",{className:t.body,style:{paddingTop:r,paddingBottom:o}},a)))})},385:function(e,t,n){"use strict";var a=n(377),r=n(17),c=n(40),i=n.n(c),o=n(0),l=n.n(o);t.a=Object(r.withStyles)(e=>({text:{paddingLeft:2*e.spacing.unit,paddingRight:2*e.spacing.unit}}))(e=>{const{classes:t,text:n}=e,r=Object(a.d)(e,["classes","text"]);return l.a.createElement(i.a,Object.assign({className:t.text,color:"textSecondary"},r),n)})},387:function(e,t,n){"use strict";var a=n(377),r=n(17),c=n(40),i=n.n(c),o=n(0),l=n.n(o);t.a=Object(r.withStyles)(e=>({headline:{marginTop:4*e.spacing.unit,paddingLeft:2*e.spacing.unit,paddingRight:2*e.spacing.unit}}))(e=>{const{classes:t,text:n}=e,r=Object(a.d)(e,["classes","text"]);return l.a.createElement(i.a,Object.assign({className:t.headline,variant:"h5",color:"textSecondary",gutterBottom:!0},r),n)})},388:function(e,t,n){"use strict";var a=n(377),r=n(150),c=n.n(r),i=n(0),o=n.n(i),l=n(381);t.a=e=>{var{classes:t}=e,n=Object(a.d)(e,["classes"]);return o.a.createElement(l.a,null,o.a.createElement(c.a,Object.assign({fullWidth:!0,margin:"normal"},n)))}},389:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(377),r=n(19),c=n(378);const i={fetchHeatingDevices:()=>Object(a.b)(void 0,void 0,void 0,(function*(){const e=yield Object(c.a)("GET","/devices"),t=Object(r.sortBy)(e,"name").reduce((e,t,n)=>(e[n]=t,e[t.id]=t,e),{});return t.length=e.length,t}))}},390:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(377),r=n(19),c=n(378);const i={fetchHeatingZones:()=>Object(a.b)(void 0,void 0,void 0,(function*(){const e=yield Object(c.a)("GET","/zones"),t=Object(r.sortBy)(e,"name").reduce((e,t,n)=>(e[n]=t,e[t.id]=t,e),{});return t.length=e.length,t}))}},391:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(377),r=n(378);const c={fetchSettings:()=>Object(a.b)(void 0,void 0,void 0,(function*(){return yield Object(r.a)("GET","/settings")})),updateSettings:e=>Object(a.b)(void 0,void 0,void 0,(function*(){return yield Object(r.a)("PUT","/settings",e)}))}},395:function(e,t,n){"use strict";var a=n(389),r=n(379),c=n(391),i=n(377),o=n(0),l=n.n(o);const s=new Map,u="Loading...";function d(e,t){return(n=!1,a=!1)=>{const r=s.get(e);let[c,d]=[null,null];n&&([c,d]=l.a.useState(r!==u?r:null));const[f,m]=l.a.useState(!1);function b(n=!1){if(null==s.get(e)||n)throw s.set(e,u),function(e,t){return Object(i.b)(this,void 0,void 0,(function*(){try{t(yield e())}catch(e){t(()=>{throw e})}}))}(t,t=>{"function"==typeof t?s.set(e,t(s.get(e))):(console.log("Cache updated",e,t),s.set(e,t))}).catch(e=>{m(!!a||(()=>{throw e}))})}return b(),Object(o.useEffect)(()=>()=>{s.delete(e)},[]),{[e]:n?c:r,[`set${e.charAt(0).toUpperCase()+e.slice(1)}`]:n?d:function(){0},[`load${e.charAt(0).toUpperCase()+e.slice(1)}`]:b,[`load${e.charAt(0).toUpperCase()+e.slice(1)}Failed`]:f}}}var f=n(390);n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return b})),n.d(t,"f",(function(){return p})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return v})),n.d(t,"b",(function(){return h}));const m=d("plans",r.b.fetchPlans),b=d("devices",a.a.fetchHeatingDevices),p=d("zones",f.a.fetchHeatingZones),g=d("scheduleInformation",r.b.fetchSchedule),v=d("settings",c.a.fetchSettings),h=d("mode",r.a.fetchMode)},402:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(404),r=n.n(a),c=n(103),i=n.n(c),o=n(96),l=n.n(o),s=n(403),u=n.n(s);const d=e=>{const t=Math.round(100*function(e,t,n,a,r){return Math.floor((r-a)*(e-t)/(n-t)+a)}(Math.min(Math.max(16,e),24),16,24,1,8)+100);return e<=16?i.a[t]:e<=18.5?u.a[t]:e<=20.5?r.a[t]:l.a[t]}},403:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};t.default=a},404:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",A100:"#ffe57f",A200:"#ffd740",A400:"#ffc400",A700:"#ffab00"};t.default=a},416:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var r=a(n(7)),c=a(n(3)),i=a(n(4)),o=a(n(0)),l=(a(n(2)),a(n(5))),s=(n(8),a(n(6))),u=function(e){return{root:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),borderRadius:"50%",overflow:"hidden",userSelect:"none"},colorDefault:{color:e.palette.background.default,backgroundColor:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600]},img:{width:"100%",height:"100%",textAlign:"center",objectFit:"cover"}}};function d(e){var t=e.alt,n=e.children,a=e.childrenClassName,s=e.classes,u=e.className,d=e.component,f=e.imgProps,m=e.sizes,b=e.src,p=e.srcSet,g=(0,i.default)(e,["alt","children","childrenClassName","classes","className","component","imgProps","sizes","src","srcSet"]),v=null,h=b||p;return v=h?o.default.createElement("img",(0,c.default)({alt:t,src:b,srcSet:p,sizes:m,className:s.img},f)):a&&o.default.isValidElement(n)?o.default.cloneElement(n,{className:(0,l.default)(a,n.props.className)}):n,o.default.createElement(d,(0,c.default)({className:(0,l.default)(s.root,s.system,(0,r.default)({},s.colorDefault,!h),u)},g),v)}t.styles=u,d.defaultProps={component:"div"};var f=(0,s.default)(u,{name:"MuiAvatar"})(d);t.default=f},421:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return h}));var a=n(50),r=n(17),c=n(154),i=n.n(c),o=n(96),l=n.n(o),s=n(423),u=n.n(s),d=n(0),f=n.n(d),m=n(402);const b=n(422),p=e=>({root:{fontSize:"1em",float:"left",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",width:45},avatar:{width:35,height:35,lineHeight:35,position:"relative",overflow:"hidden"},img:{width:35,height:35,zIndex:2,position:"absolute",left:0,bottom:0},fill:{display:"block",width:35,height:33,zIndex:1,position:"absolute",left:0,bottom:1}});function g(e,t){return(Math.round(e*Math.pow(10,t))/Math.pow(10,t)).toFixed(t)}const v=Object(r.withStyles)(p)(e=>{const{value:t,classes:n,fill:r}=e;let{digits:c}=e;const i=(100===r?u.a:l.a)[500];return null==c&&(c=2),f.a.createElement("div",{className:n.root},f.a.createElement("div",{className:n.avatar},f.a.createElement("object",{className:n.img,data:b,type:"image/svg+xml"}),f.a.createElement("span",{style:{height:`calc(${r}% - 5px)`,background:i},className:n.fill})),f.a.createElement(a.v,{variant:"body1",color:"textSecondary",component:"div"},g(t,c),"°"))}),h=Object(r.withStyles)(p)(e=>{const{value:t}=e;return f.a.createElement(i.a,{style:{padding:"25px",background:Object(m.a)(t),fontSize:"1em"}},g(t,1),"°")})},422:function(e,t,n){e.exports=n.p+"icon_black.svg?5136879a03a13f9fb18f241b081f38cb"},423:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"};t.default=a},463:function(e,t,n){"use strict";n.r(t);var a=n(50),r=n(101),c=n.n(r),i=n(62),o=n.n(i),l=n(63),s=n.n(l),u=n(102),d=n.n(u),f=n(95),m=n.n(f),b=n(17),p=n(0),g=n.n(p),v=n(111),h=n(395),y=n(380),j=n(385),O=n(388),E=n(381),x=n(382),w=n(387),S=n(421),N=n(91),T=n(383);function M(e,t){return e>t?100:Math.round(e/t*100)}t.default=Object(b.withStyles)(e=>({list:{marginTop:0,marginBottom:2*e.spacing.unit}}))(e=>{const{classes:t}=e,{scheduleInformation:n}=Object(h.d)();function r(e){if(e.thermostatMode!==v.b.Automatic)return Object(N.a)(`ThermostatMode.${e.thermostatMode}`);if(e.conflictingPlans.length>1){const t=e.conflictingPlans.filter(t=>e.plan.id!==t.id).map(e=>e.name).join(", ");return`${e.plan.name} (${t})`}return e.plan.name}return g.a.createElement(T.a,null,{header:g.a.createElement(y.a,null,{title:Object(N.a)("temperatures.title"),button:g.a.createElement(x.a,null)}),paddingTop:50,body:g.a.createElement(g.a.Fragment,null,g.a.createElement(w.a,{text:Object(N.a)("temperatures.schedule")}),g.a.createElement(E.a,null,g.a.createElement(a.i,{className:t.formControl,fullWidth:!0},g.a.createElement(a.k,null,Object(N.a)("temperatures.mode")),g.a.createElement(a.s,{fullWidth:!0,disabled:!0,value:n.mode},[0,1,2,3,4,5].map(e=>g.a.createElement(a.r,{key:e,value:e},Object(N.a)(`Modes.${e}`)))))),n.nextDate&&g.a.createElement(O.a,{label:Object(N.a)("temperatures.next"),type:"datetime-local",value:(e=>{if(null==e)return"";const t=new Date(e),n=e=>(e<10?"0":"")+e;return t.getFullYear()+"-"+n(t.getMonth()+1)+"-"+n(t.getDate())+"T"+n(t.getHours())+":"+n(t.getMinutes())+":"+n(t.getSeconds())})(n.nextDate),disabled:!0}),g.a.createElement(w.a,{text:Object(N.a)("temperatures.list.title")}),g.a.createElement(j.a,{text:Object(N.a)("temperatures.list.text")}),0===n.temperatures.length?g.a.createElement(j.a,{style:{paddingTop:16},text:Object(N.a)("temperatures.list.empty")}):g.a.createElement(o.a,{className:t.list},n.temperatures.length>0&&g.a.createElement(c.a,null),n.temperatures.map(e=>g.a.createElement(g.a.Fragment,{key:e.device.id+e.plan.id},g.a.createElement(s.a,null,g.a.createElement(a.o,null,g.a.createElement(S.b,{value:e.targetTemperature})),g.a.createElement(m.a,{primary:e.device.name,secondary:r(e)}),g.a.createElement(d.a,{style:{paddingRight:16}},g.a.createElement(S.a,{value:e.temperature||e.targetTemperature,fill:M(e.temperature||e.targetTemperature,e.targetTemperature)}))),g.a.createElement(c.a,null)))))})})}}]);
//# sourceMappingURL=https://raw.githubusercontent.com/mskg/homey-heating/release/v1.2.3-rc5/settings/7.js.map