(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{147:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l.default}});var l=a(n(401))},374:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n(373);function l(e,t,n=null){return a.b(this,void 0,void 0,function*(){return yield new Promise((a,l)=>{Homey.api(e,t,n,(e,t)=>{e?l(e):a(t)})})})}},376:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r});var a=n(373),l=n(17),c=n(374);const o=e=>a.b(void 0,void 0,void 0,function*(){const t=Object.assign({},e);return t.zones&&0!==t.zones.length||(t.zones=void 0),t.devices&&0!==t.devices.length||(t.devices=void 0),yield Object(c.a)("PUT",`/plans/${e.id}`,t)}),i={fetchPlans:()=>a.b(void 0,void 0,void 0,function*(){const e=yield Object(c.a)("GET","/plans");return Object(l.sortBy)(Object(l.map)(e,e=>(e.zones=e.zones||[],e.devices=e.devices||[],e)),e=>e.name)}),fetchPlanById:e=>a.b(void 0,void 0,void 0,function*(){const t=yield Object(c.a)("GET",`/plans/${e}`);if(null==t)throw new Error(`Plan ${e} not found.`);return t.zones=t.zones||[],t.devices=t.devices||[],t}),fetchSchedule:()=>a.b(void 0,void 0,void 0,function*(){const e=yield Object(c.a)("GET","/schedule");return e.temperatures=Object(l.sortBy)(e.temperatures,[e=>e.device.name]),e}),updatePlan:o,removePlan:e=>a.b(void 0,void 0,void 0,function*(){return yield Object(c.a)("DELETE",`/plans/${e}`)}),togglePlanState:e=>a.b(void 0,void 0,void 0,function*(){return e.enabled=!e.enabled,yield o(e),!0})},r={fetchMode:()=>a.b(void 0,void 0,void 0,function*(){return(yield Object(c.a)("GET","/mode")).mode}),setMode:e=>a.b(void 0,void 0,void 0,function*(){return yield Object(c.a)("PUT","/mode",{mode:e})})}},377:function(e,t,n){"use strict";var a=n(143),l=n.n(a),c=n(19),o=n(144),i=n.n(o),r=n(39),s=n.n(r),d=n(0),u=n.n(d);t.a=Object(c.withStyles)(e=>({appBar:{},grow:{flexGrow:1},buttons:{display:"flex"},toolbar:{alignItems:"center",justifyContent:"space-between"}}))(e=>{const{classes:t}=e,{button:n,title:a,actions:c,subBar:o}=e.children||{button:null,title:null,actions:null,subBar:null};return u.a.createElement(d.Fragment,null,u.a.createElement(l.a,{position:"absolute",color:"primary",className:t.appBar},u.a.createElement(i.a,{className:t.toolbar},e.button||n,u.a.createElement(s.a,{variant:"h6",color:"inherit",noWrap:!0},e.title||a),u.a.createElement("div",{className:t.grow}),null!=c&&u.a.createElement("div",{className:t.buttons},c)),null!=o&&o))})},378:function(e,t,n){"use strict";var a=n(19),l=n(0),c=n.n(l);t.a=Object(a.withStyles)(e=>({inputContainer:{width:"100%",paddingLeft:2*e.spacing.unit,paddingRight:3*e.spacing.unit}}))(e=>c.a.createElement("div",{className:e.classes.inputContainer},e.children))},379:function(e,t,n){"use strict";var a=n(373),l=n(48),c=n(19),o=n(145),i=n.n(o),r=n(382),s=n.n(r),d=n(0),u=n.n(d),m=n(28),b=n(85),f=n(86);function g(e){var{innerRef:t}=e,n=a.d(e,["innerRef"]);return n.to.toString().match(/https/)?u.a.createElement("a",Object.assign({onClick:()=>Homey.openURL(n.to.toString())},n),n.children):u.a.createElement(f.b,Object.assign({},n))}var v=e=>u.a.createElement(l.n,Object.assign({},e,{component:g}),e.children);n.d(t,"a",function(){return p}),n.d(t,"b",function(){return y});const h=e=>({text:{padding:2*e.spacing.unit,paddingBottom:0},version:{padding:2*e.spacing.unit,paddingTop:0},normal:{},selected:{color:e.palette.primary.main},otherButton:{},firstButton:{marginLeft:-12}}),p=e=>{const[t,n]=u.a.useState(!1);return u.a.createElement(u.a.Fragment,null,u.a.createElement(E,{open:t,onClose:()=>{n(!1)}}),u.a.createElement(y,{first:!0,onClick:()=>{n(!0)},icon:u.a.createElement(s.a,null)}))},E=Object(m.e)(Object(c.withStyles)(h)(e=>{const{classes:t}=e,n=[{type:"entry",to:"/",text:Object(b.a)("menu.plans")},{to:"/temperatures",text:Object(b.a)("menu.temperatures")},{to:"/schedules",text:Object(b.a)("menu.schedules")},{to:"/settings",text:Object(b.a)("menu.settings")},{to:"https://homey-heating.mskg.app",text:Object(b.a)("menu.help")}];return u.a.createElement(i.a,{open:e.open,onClose:e.onClose},u.a.createElement(l.v,{className:t.text,variant:"h5",gutterBottom:!0},Object(b.a)("menu.title")),u.a.createElement(l.v,{className:t.version,variant:"body2",color:"textSecondary",gutterBottom:!0},"Version ","1.2.2-rc1"," (","682",")"),u.a.createElement(l.h,null),u.a.createElement(l.m,null,n.map(n=>"Divider"===n.type?u.a.createElement(l.h,null):u.a.createElement(v,{key:n.to,to:n.to,disabled:e.match.url===n.to,button:!0},u.a.createElement(l.q,{primary:n.text,classes:{primary:e.match.url!==n.to?t.normal:t.selected}})))))})),y=Object(c.withStyles)(h)(e=>{const{classes:t,first:n,icon:c}=e,o=a.d(e,["classes","first","icon"]);return u.a.createElement(l.j,Object.assign({className:n?t.firstButton:t.otherButton,color:"inherit"},o),c)})},380:function(e,t,n){"use strict";var a=n(19),l=n(0),c=n.n(l);t.a=Object(a.withStyles)(e=>({root:{webkitOverflowScrolling:"touch",display:"flex",flexFlow:"column",height:"100vh",width:"100vw",backgroundColor:"#fff"},body:{flex:"1 0 100%",margin:0,maxWidth:"100%",overflowY:"scroll"}}))(e=>{const{classes:t}=e,{header:n,body:a,paddingTop:l,paddingBottom:o}=e.children,i=o||"auto";return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:t.root},n,c.a.createElement("div",{className:t.body,style:{paddingTop:l,paddingBottom:i}},a)))})},381:function(e,t,n){"use strict";var a=n(373),l=n(19),c=n(39),o=n.n(c),i=n(0),r=n.n(i);t.a=Object(l.withStyles)(e=>({text:{paddingLeft:2*e.spacing.unit,paddingRight:2*e.spacing.unit}}))(e=>{const{classes:t,text:n}=e,l=a.d(e,["classes","text"]);return r.a.createElement(o.a,Object.assign({className:t.text,color:"textSecondary"},l),n)})},383:function(e,t,n){"use strict";var a=n(373),l=n(19),c=n(39),o=n.n(c),i=n(0),r=n.n(i);t.a=Object(l.withStyles)(e=>({headline:{marginTop:4*e.spacing.unit,paddingLeft:2*e.spacing.unit,paddingRight:2*e.spacing.unit}}))(e=>{const{classes:t,text:n}=e,l=a.d(e,["classes","text"]);return r.a.createElement(o.a,Object.assign({className:t.headline,variant:"h5",color:"textSecondary",gutterBottom:!0},l),n)})},384:function(e,t,n){"use strict";var a=n(373),l=n(146),c=n.n(l),o=n(0),i=n.n(o),r=n(378);t.a=(e=>{var{classes:t}=e,n=a.d(e,["classes"]);return i.a.createElement(r.a,null,i.a.createElement(c.a,Object.assign({fullWidth:!0,margin:"normal"},n)))})},385:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(373),l=n(17),c=n(374);const o={fetchHeatingDevices:()=>a.b(void 0,void 0,void 0,function*(){const e=yield Object(c.a)("GET","/devices"),t=Object(l.sortBy)(e,"name").reduce((e,t,n)=>(e[n]=t,e[t.id]=t,e),{});return t.length=e.length,t})}},386:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(373),l=n(17),c=n(374);const o={fetchHeatingZones:()=>a.b(void 0,void 0,void 0,function*(){const e=yield Object(c.a)("GET","/zones"),t=Object(l.sortBy)(e,"name").reduce((e,t,n)=>(e[n]=t,e[t.id]=t,e),{});return t.length=e.length,t})}},387:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(0)),c=(0,a(n(375)).default)(l.default.createElement(l.default.Fragment,null,l.default.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),l.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"Cancel");t.default=c},388:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(373),l=n(374);const c={fetchSettings:()=>a.b(void 0,void 0,void 0,function*(){return yield Object(l.a)("GET","/settings")}),updateSettings:e=>a.b(void 0,void 0,void 0,function*(){return yield Object(l.a)("PUT","/settings",e)})}},390:function(e,t,n){"use strict";var a=n(385),l=n(376),c=n(388),o=n(373),i=n(0),r=n.n(i);const s=new Map,d="Loading...";function u(e,t){return(n=!1,a=!1)=>{const l=s.get(e);let[c,u]=[null,null];n&&([c,u]=r.a.useState(l!==d?l:null));const[m,b]=r.a.useState(!1);function f(){if(null==s.get(e))throw s.set(e,d),function(e,t){return o.b(this,void 0,void 0,function*(){try{t(yield e())}catch(e){t(()=>{throw e})}})}(t,t=>{"function"==typeof t?s.set(e,t(s.get(e))):s.set(e,t)}).catch(e=>{b(!!a||(()=>{throw e}))})}return f(),Object(i.useEffect)(()=>()=>{s.delete(e)},[]),{[e]:n?c:l,[`set${e.charAt(0).toUpperCase()+e.slice(1)}`]:n?u:function(){},[`load${e.charAt(0).toUpperCase()+e.slice(1)}`]:f,[`load${e.charAt(0).toUpperCase()+e.slice(1)}Failed`]:m}}}var m=n(386);n.d(t,"c",function(){return b}),n.d(t,"a",function(){return f}),n.d(t,"f",function(){return g}),n.d(t,"d",function(){return v}),n.d(t,"e",function(){return h}),n.d(t,"b",function(){return p});const b=u("plans",l.b.fetchPlans),f=u("devices",a.a.fetchHeatingDevices),g=u("zones",m.a.fetchHeatingZones),v=u("scheduleInformation",l.b.fetchSchedule),h=u("settings",c.a.fetchSettings),p=u("mode",l.a.fetchMode)},401:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var l=a(n(3)),c=a(n(7)),o=a(n(4)),i=a(n(0)),r=(a(n(2)),a(n(6))),s=a(n(29)),d=a(n(5)),u=a(n(39)),m=n(16),b=function(e){return{root:{display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-14,marginRight:16,"&$disabled":{cursor:"default"}},labelPlacementStart:{flexDirection:"row-reverse",marginLeft:16,marginRight:-14},labelPlacementTop:{flexDirection:"column-reverse",marginLeft:16},labelPlacementBottom:{flexDirection:"column",marginLeft:16},disabled:{},label:{"&$disabled":{color:e.palette.text.disabled}}}};function f(e){e.checked;var t,n=e.classes,a=e.className,s=e.control,d=e.disabled,b=(e.inputRef,e.label),f=e.labelPlacement,g=e.muiFormControl,v=(e.name,e.onChange,e.value,(0,o.default)(e,["checked","classes","className","control","disabled","inputRef","label","labelPlacement","muiFormControl","name","onChange","value"])),h=d;void 0===h&&void 0!==s.props.disabled&&(h=s.props.disabled),void 0===h&&g&&(h=g.disabled);var p={disabled:h};return["checked","name","onChange","value","inputRef"].forEach(function(t){void 0===s.props[t]&&void 0!==e[t]&&(p[t]=e[t])}),i.default.createElement("label",(0,l.default)({className:(0,r.default)(n.root,(t={},(0,c.default)(t,n["labelPlacement".concat((0,m.capitalize)(f))],"end"!==f),(0,c.default)(t,n.disabled,h),t),a)},v),i.default.cloneElement(s,p),i.default.createElement(u.default,{component:"span",className:(0,r.default)(n.label,(0,c.default)({},n.disabled,h))},b))}t.styles=b,f.defaultProps={labelPlacement:"end"};var g=(0,d.default)(b,{name:"MuiFormControlLabel"})((0,s.default)(f));t.default=g},5645:function(e,t,n){"use strict";n.r(t);var a=n(373),l=n(48),c=n(147),o=n.n(c),i=n(19),r=n(150),s=n.n(r),d=n(387),u=n.n(d),m=n(91),b=n(0),f=n.n(b),g=n(28),v=n(390),h=n(388),p=n(377),E=n(381),y=n(384),j=n(378),O=n(379),S=n(383),x=n(85),C=n(380);t.default=Object(m.withSnackbar)(Object(g.e)(Object(i.withStyles)(e=>({}))(e=>{const{settings:t,setSettings:n,loadSettings:c}=Object(v.e)(!0),[i,r]=f.a.useState(!1);function d(e,n=null){const a=t[e];return null==a?n:a}const m=(e,t="value")=>a=>{const l=a.target[t];n(t=>Object.assign({},t,{[e]:l})),r(!0)};return f.a.createElement(C.a,null,{header:f.a.createElement(p.a,null,{title:Object(x.a)("settings.title"),button:f.a.createElement(f.a.Fragment,null,!i&&f.a.createElement(O.a,null),i&&f.a.createElement(O.b,{first:!0,onClick:()=>a.b(void 0,void 0,void 0,function*(){yield c(),r(!1)}),icon:f.a.createElement(u.a,null)})),actions:f.a.createElement(f.a.Fragment,null,i&&f.a.createElement(l.a,{color:"inherit",onClick:()=>{h.a.updateSettings(t).then(t=>{e.enqueueSnackbar(Object(x.a)("settings.saved")),r(!1)})}},"save"))}),paddingTop:50,paddingBottom:50,body:f.a.createElement(f.a.Fragment,null,f.a.createElement(S.a,{text:Object(x.a)("settings.notifications.category")}),f.a.createElement(E.a,{text:Object(x.a)("settings.notifications.text")}),f.a.createElement(j.a,null,f.a.createElement(o.a,{control:f.a.createElement(s.a,{checked:!0===d("NotifyModeChange",!0),onChange:m("NotifyModeChange","checked")}),label:Object(x.a)("settings.notifications.NotifyModeChange"),labelPlacement:"end"})),f.a.createElement(j.a,null,f.a.createElement(o.a,{control:f.a.createElement(s.a,{checked:!0===d("NotifySetError",!0),onChange:m("NotifySetError","checked")}),label:Object(x.a)("settings.notifications.NotifySetError"),labelPlacement:"end"})),f.a.createElement(j.a,null,f.a.createElement(o.a,{control:f.a.createElement(s.a,{checked:!0===d("NotifySetSuccess",!0),onChange:m("NotifySetSuccess","checked")}),label:Object(x.a)("settings.notifications.NotifySetSuccess"),labelPlacement:"end"})),f.a.createElement(S.a,{text:Object(x.a)("settings.sentry.category")}),f.a.createElement(E.a,{text:Object(x.a)("settings.sentry.text")}),f.a.createElement(j.a,null,f.a.createElement(o.a,{control:f.a.createElement(s.a,{checked:!0===d("SentryEnabled",!0),onChange:m("SentryEnabled","checked")}),label:Object(x.a)("settings.enabled.label"),labelPlacement:"end"})),f.a.createElement(S.a,{text:Object(x.a)("settings.log.category")}),f.a.createElement(E.a,{text:Object(x.a)("settings.log.text")}),f.a.createElement(j.a,null,f.a.createElement(o.a,{control:f.a.createElement(s.a,{checked:!0===d("ConsoleReLogEnabled"),onChange:m("ConsoleReLogEnabled","checked")}),label:Object(x.a)("settings.enabled.label"),labelPlacement:"end"})),f.a.createElement(y.a,{label:Object(x.a)("settings.category.label"),placeholder:Object(x.a)("settings.category.placeholder"),required:!0===d("ConsoleReLogEnabled"),value:d("ConsoleReLogCategory",""),onChange:m("ConsoleReLogCategory")}),f.a.createElement(S.a,{text:Object(x.a)("settings.backup.title")}),f.a.createElement(E.a,{text:Object(x.a)("settings.backup.text")}),f.a.createElement(y.a,{label:Object(x.a)("settings.backup.label"),placeholder:Object(x.a)("settings.backup.placeholder"),multiline:!0,rowsMax:"10",value:d("Plans",""),onChange:m("Plans")}))})})))}}]);
//# sourceMappingURL=https://raw.githubusercontent.com/mskg/homey-heating/release/v1.2.2-rc1/settings/11.js.map